Traceback (most recent call last):
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\jupyter_core\utils\__init__.py", line 154, in wrapped
    asyncio.get_running_loop()
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\jupyter_cache\executors\utils.py", line 58, in single_nb_execution
    executenb(
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\nbclient\client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\jupyter_core\utils\__init__.py", line 158, in wrapped
    return loop.run_until_complete(inner)
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\asyncio\base_events.py", line 649, in run_until_complete
    return future.result()
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\nbclient\client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\nbclient\client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "C:\Users\nick9\anaconda3\envs\jupyterbook\lib\site-packages\nbclient\client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt

# Laad datasets (gebruik jouw CSV-bestanden)
co2_df = pd.read_csv("co-emissions-by-sector.csv")
ev_df = pd.read_csv("IEA-EV-dataEV salesHistoricalCars.csv")

# Filter CO2 voor 2020
co2_2020 = co2_df[(co2_df["Year"] == 2020) & (co2_df["Carbon dioxide emissions from transport"].notna())]
co2_2020 = co2_2020[["Entity", "Code", "Carbon dioxide emissions from transport"]].copy()
co2_2020.rename(columns={"Carbon dioxide emissions from transport": "transport_co2"}, inplace=True)

# Filter EV-aandeel voor 2020
ev_2020 = ev_df[
    (ev_df['parameter'] == 'EV stock share') &
    (ev_df['mode'] == 'Cars') &
    (ev_df['powertrain'] == 'EV') &
    (ev_df['year'] == 2020)
][['region', 'value']].copy()
ev_2020.rename(columns={'region': 'Entity', 'value': 'ev_share_percent'}, inplace=True)

# Merge
merged = pd.merge(co2_2020, ev_2020, on="Entity", how="left")

# Wereldkaart
world = gpd.read_file("110m_cultral_shp/ne_110m_admin_0_countries.shp")
world['centroid'] = world.representative_point()
world_map = world.merge(merged, left_on="ADMIN", right_on="Entity", how="left")

# Plot
fig, ax = plt.subplots(figsize=(16, 10))
world_map.plot(column='transport_co2', cmap='OrRd', linewidth=0.8, edgecolor='0.8',
               legend=True, ax=ax, missing_kwds={"color": "lightgrey"},
               legend_kwds={'label': "Transport COâ‚‚-uitstoot (ton, 2020)", 'shrink': 0.6})

for idx, row in world_map.iterrows():
    if pd.notna(row['ev_share_percent']):
        point = row['centroid']
        ax.text(point.x, point.y, f"{row['ev_share_percent']:.1f}%", fontsize=6,
                ha='center', va='center', color='black')

ax.set_title('Wereldkaart: Transport COâ‚‚-uitstoot per land (2020) en EV-aandeel (%)', fontsize=15)
ax.axis('off')
plt.tight_layout()
plt.savefig("wereldkaart_transport_co2_ev_share_2020.png", dpi=300)
plt.show()
------------------


[1;31m---------------------------------------------------------------------------[0m
[1;31mModuleNotFoundError[0m                       Traceback (most recent call last)
Cell [1;32mIn[4], line 2[0m
[0;32m      1[0m [38;5;28;01mimport[39;00m[38;5;250m [39m[38;5;21;01mpandas[39;00m[38;5;250m [39m[38;5;28;01mas[39;00m[38;5;250m [39m[38;5;21;01mpd[39;00m
[1;32m----> 2[0m [38;5;28;01mimport[39;00m[38;5;250m [39m[38;5;21;01mgeopandas[39;00m[38;5;250m [39m[38;5;28;01mas[39;00m[38;5;250m [39m[38;5;21;01mgpd[39;00m
[0;32m      3[0m [38;5;28;01mimport[39;00m[38;5;250m [39m[38;5;21;01mmatplotlib[39;00m[38;5;21;01m.[39;00m[38;5;21;01mpyplot[39;00m[38;5;250m [39m[38;5;28;01mas[39;00m[38;5;250m [39m[38;5;21;01mplt[39;00m
[0;32m      5[0m [38;5;66;03m# Laad datasets (gebruik jouw CSV-bestanden)[39;00m

[1;31mModuleNotFoundError[0m: No module named 'geopandas'

